<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>News Portal App ðŸ“–ðŸ—ž</title>

    <script>
        function loadArticles(key) {
            var r = new XMLHttpRequest();
            if(key === 1) r.open("GET", "http://localhost:8080/blogs/api/v1/public/articles");
            else r.open("GET", "http://localhost:8080/blogs/api/v1/public/articles/no-author");
            r.send();
            r.onload = function() {
                if(r.status === 200)
                {
                    var json_data = JSON.parse((r.response));
                    var table = document.createElement('table');

                    for (var i in json_data){
                        var tr = document.createElement('tr');

                        var td1 = document.createElement('td');
                        var td2 = document.createElement('td');
                        var td3 = document.createElement('td');
                        var td4 = document.createElement('td');
                        var td5 = document.createElement('td');

                        var text1 = document.createTextNode(json_data[i]['articleId']);
                        var text2 = document.createTextNode(json_data[i]['title']);
                        var text3 = document.createTextNode(json_data[i]['body']);
                        var text4 = document.createTextNode(json_data[i]['timestamp']);
                        var text5 = document.createTextNode(json_data[i]['published']);

                        td1.appendChild(text1);
                        td2.appendChild(text2);
                        td3.appendChild(text3);
                        td4.appendChild(text4);
                        td5.appendChild(text5);
                        tr.appendChild(td1);
                        tr.appendChild(td2);
                        tr.appendChild(td3);
                        tr.appendChild(td4);
                        tr.appendChild(td5);

                        table.appendChild(tr);
                    }
                    document.getElementById("all-articles").innerHTML = "";
                    document.getElementById("all-articles").appendChild(table);
                }
                else{
                    if(key === 1) alert("failed to load all articles");
                    else alert("failed to load all articles with no author");
                }
            }
        }

        function loadAllComments() {
            var r = new XMLHttpRequest();
            r.open("GET", "http://localhost:8080/blogs/api/v1/public/comments");
            r.send();
            r.onload = function() {
                if(r.status === 200)
                {
                    var json_data = JSON.parse((r.response));
                    var table = document.createElement('table');

                    for (var i in json_data){
                        var tr = document.createElement('tr');

                        var td1 = document.createElement('td');
                        var td2 = document.createElement('td');

                        var text1 = document.createTextNode(json_data[i]['commentId']);
                        var text2 = document.createTextNode(json_data[i]['comment']);

                        td1.appendChild(text1);
                        td2.appendChild(text2);
                        tr.appendChild(td1);
                        tr.appendChild(td2);

                        table.appendChild(tr);
                    }
                    document.getElementById("all-comments").innerHTML = "";
                    document.getElementById("all-comments").appendChild(table);
                }
                else{
                    alert("failed to load all articles");
                }
            }
        }
    </script>
  </head>

  <body>

  <div id="public-api">
    <ul>
      <li><button onclick="loadArticles(1)">All Articles</button></li>
      <li><button onclick="loadArticles(2)">All Articles with No Author</button></li>
      <li><button onclick="loadAllComments()">All Comments</button></li>
      <li><button>All Comments by Article Id</button><input onsubmit="" type="number" id="articleId" name="articleId" min="0"/><input type="submit"></li>
    </ul>

    <hr>

    <div id="all-articles"></div>
    <div id="all-comments"></div>
    <div id="all-articles-no-author"></div>
  </div>
  </body>
</html>
